System.register("chunks:///main.js",["cc"],(function(){"use strict";var e,t,i,n,r,o,a,s,c,u,m;return{setters:[function(f){e=f.cclegacy,t=f.find,i=f.Camera,n=f.instantiate,r=f.director,o=f.Vec3,a=f.screen,s=f._decorator,c=f.Prefab,u=f.Component,m=f.assetManager}],execute:function(){function f(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,i){return t&&f(e.prototype,t),i&&f(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function v(e,t,i,n,r){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}e._RF.push({},"b2cb23wOitNypimZ+qxXTTU","MagicEmojiUtil",void 0);var y=function(){function e(){}return e.instantiate=function(e){var t=n(e);return r.getScene().addChild(t),t},e.convertScreenPosToCenter=function(e){return new o(e.x+e.w/2,e.y-e.h/2,0)},e.getWorldPositionFromScreenPos=function(t,i,n){var r=e.mainCamera.screenToWorld(new o(t,i,n));return r.z=0,r},l(e,null,[{key:"mainCamera",get:function(){return e._mainCamera||(e._mainCamera=t("Main Camera").getComponent(i)),this._mainCamera}}]),e}();y._mainCamera=void 0,e._RF.pop(),e._RF.push({},"b00d3vP8MxK8L2wHhIvBMTc","MEMeta",void 0);var g,w,j,_,C,P,M,x=function(){function e(e){var t=e.x,i=e.y,n=e.w,r=e.h;this.x=void 0,this.y=void 0,this.w=void 0,this.h=void 0,this.x=t,this.y=i,this.w=n,this.h=r}return e.prototype.convert=function(){return this.y=a.windowSize.height-this.y,this},e}(),R=function(e){function t(t){var i,n=t.emojiKey,r=t.timestamp,o=t.scene,a=t.frame,s=t.ID,c=t.ext,u=t.emojiCount,m=t.isFrom,f=t.msgId,l=t.msgType,p=t.toUserName,d=t.fromUserName,h=t.content;return(i=e.call(this,{emojiKey:n,timestamp:r,scene:o,frame:a,ID:s,ext:c,emojiCount:u})||this).isFrom=void 0,i.msgId=void 0,i.msgType=void 0,i.toUserName=void 0,i.fromUserName=void 0,i.content=void 0,i.isFrom=m,i.msgId=f,i.msgType=l,i.toUserName=p,i.fromUserName=d,i.content=h,i}return p(t,e),l(t,[{key:"isPat",get:function(){return 49===this.msgType}}]),t}((function(e){var t=e.emojiKey,i=e.timestamp,n=e.scene,r=e.frame,o=e.ID,a=e.ext,s=e.emojiCount;this.emojiKey=void 0,this.timestamp=void 0,this.scene=void 0,this.id=void 0,this.ext=void 0,this.emojiCount=void 0,this.frame=void 0,this.emojiKey=t,this.timestamp=i,this.scene=n,this.id=o,this.ext=a,this.emojiCount=s,r&&(this.frame=r instanceof x?r:new x(r))}));e._RF.pop(),e._RF.push({},"adca0A5XBJMyYcinUDIt5hz","ME_Ribben",void 0);var E,F=s.ccclass,S=s.property;g=F("ME_Ribben"),w=S([c]),j=S([c]),g((P=v((C=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).EMOJI_KEY="Ribben",b(t,"prefabSet",P,h(t)),b(t,"prefabPat",M,h(t)),t}p(t,e);var i=t.prototype;return i.onLoad=function(){},i.handleEmoji=function(e){var t,i,n=y.convertScreenPosToCenter(e.msgMeta.frame),r=y.getWorldPositionFromScreenPos(n.x,n.y,0);i=null!=(t=e.msgMeta)&&t.isPat?r.y>0?this.prefabPat[0]:this.prefabPat[1]:r.x>0?r.y>0?this.prefabSet[0]:this.prefabSet[1]:r.y>0?this.prefabSet[2]:this.prefabSet[3];var a=y.instantiate(i);a.position=new o(r.x,r.y,5),console.info("["+this.EMOJI_KEY+"] screen: "+n+", world pos: "+r+", prefab: "+a.name)},i.onClearAllVFX=function(){},t}(u)).prototype,"prefabSet",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=v(C.prototype,"prefabPat",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=C));e._RF.pop(),e._RF.push({},"cd336XHKjtNiLaYcB/md08I","MELauncher",void 0);var z=s.ccclass;s.property,z("MELauncher")(E=function(e){function t(){return e.apply(this,arguments)||this}return p(t,e),t.prototype.start=function(){var e=Date.now();m.loadBundle("Ribben",(function(t,i){t?console.error(t):i.load("Ribben",(function(t,i){if(t)console.error(t);else{var o=n(i);r.getScene().addChild(o);var a=o.getComponent("ME_Ribben");null==a||a.handleEmoji({msgId:0,msgMeta:new R({emojiKey:"",fromUserName:"",isFrom:!1,msgId:0,msgType:0,scene:0,timestamp:0,toUserName:"",frame:new x({x:528,y:269,w:50,h:41})})}),console.info("Ribben cost: "+(Date.now()-e))}}))}))},t}(u));e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///main.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});